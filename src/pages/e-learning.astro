---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const materi = await getCollection('materi');
const sortedMateri = materi.sort((a, b) => new Date(b.data.publishedAt).getTime() - new Date(a.data.publishedAt).getTime());
const pengumuman = [
  {
    tanggal: '2024-11-10',
    judul: 'Ujian akhir semester berlangsung daring',
    isi: 'Pastikan koneksi internet stabil dan login 15 menit sebelum sesi dimulai.'
  },
  {
    tanggal: '2024-11-01',
    judul: 'Pembekalan LMS untuk siswa baru',
    isi: 'Ikuti sesi onboarding bersama tim TIK di aula utama.'
  }
];
const jadwal = [
  { hari: 'Senin', kelas: 'X IPA 1', mapel: 'Matematika', waktu: '07.30 - 09.00' },
  { hari: 'Selasa', kelas: 'XI IPS 2', mapel: 'Ekonomi', waktu: '09.15 - 10.45' },
  { hari: 'Rabu', kelas: 'XII Keagamaan', mapel: 'Tafsir', waktu: '10.45 - 12.15' }
];
---
<BaseLayout
  title="E-Learning | MA Malnu Kananga"
  description="Gerbang e-learning MA Malnu Kananga yang memuat materi digital, jadwal, dan pengumuman terkini."
>
  <section class="card elearning-hero">
    <span class="section-kicker">Pembelajaran digital</span>
    <h1 class="section-title">Gateway E-Learning MA Malnu Kananga</h1>
    <p>
      Gunakan akun madrasah untuk mengakses modul, jadwal kelas virtual, dan pengumuman penting. Aplikasi ini dioptimasi
      untuk perangkat mobile agar belajar tetap nyaman di mana saja.
    </p>
    <div class="cta-group">
      <a class="button" href="https://lms.ma-malnukananga.sch.id" target="_blank" rel="noopener">Masuk LMS Eksternal</a>
      <a class="text-link" href="mailto:tik@ma-malnukananga.sch.id">Laporkan kendala teknis</a>
    </div>
  </section>

  <section class="split-grid">
    <article class="card">
      <h2 class="section-title">Pengumuman</h2>
      <ul class="announce">
        {pengumuman.map((item) => (
          <li>
            <time>{new Date(item.tanggal).toLocaleDateString('id-ID')}</time>
            <strong>{item.judul}</strong>
            <p>{item.isi}</p>
          </li>
        ))}
      </ul>
    </article>
    <article class="card">
      <h2 class="section-title">Jadwal Kelas Virtual</h2>
      <div class="table-wrapper">
        <table>
          <caption class="sr-only">Jadwal kelas e-learning</caption>
          <thead>
            <tr>
              <th scope="col">Hari</th>
              <th scope="col">Kelas</th>
              <th scope="col">Mata Pelajaran</th>
              <th scope="col">Waktu</th>
            </tr>
          </thead>
          <tbody>
            {jadwal.map((item) => (
              <tr>
                <td>{item.hari}</td>
                <td>{item.kelas}</td>
                <td>{item.mapel}</td>
                <td>{item.waktu}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </article>
  </section>

  <section class="card materi-section">
    <div class="section-header">
      <span class="section-kicker">Materi terbaru</span>
      <h2>Kumpulan modul siap unduh</h2>
      <p>Materi diperbarui setiap pekan oleh guru pengampu dan dapat diakses secara offline setelah diunduh.</p>
    </div>
    <div class="feature-grid">
      {sortedMateri.map((item) => (
        <article class="materi-card">
          <h3>{item.data.title}</h3>
          <p class="meta">{item.data.subject} Â· Kelas {item.data.grade}</p>
          <p>Dipublikasikan {new Date(item.data.publishedAt).toLocaleDateString('id-ID')}</p>
          <div class="materi-body" set:html={item.body}></div>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
<style>
  .elearning-hero {
    display: grid;
    gap: 1rem;
  }

  .announce {
    list-style: none;
    padding: 0;
    display: grid;
    gap: 1rem;
  }

  .announce li {
    padding: 1rem;
    border-radius: 1.25rem;
    background: rgba(0, 166, 166, 0.12);
    display: grid;
    gap: 0.4rem;
  }

  .announce time {
    font-size: 0.85rem;
    color: var(--color-secondary);
    font-weight: 600;
  }

  .materi-section {
    display: grid;
    gap: 1.5rem;
  }

  .materi-card {
    background: rgba(255, 255, 255, 0.85);
    border-radius: 1.5rem;
    padding: 1.5rem;
    border: 1px solid rgba(0, 166, 166, 0.16);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
    display: grid;
    gap: 0.5rem;
  }

  .materi-card h3 {
    margin: 0;
  }

  .materi-card .meta {
    color: rgba(15, 31, 16, 0.65);
    font-weight: 600;
  }

  .materi-body :global(p) {
    color: var(--color-muted-soft);
  }

  @media (min-width: 720px) {
    .feature-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
</style>
